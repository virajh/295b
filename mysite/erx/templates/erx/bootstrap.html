<!DOCTYPE html>
<html lang="en">
    <head>
        {% load url from future %}
        <!-- Le styles -->
        <link href="{{STATIC_URL}}/css/bootstrap/css/bootstrap.css" rel="stylesheet">
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
        <script type="text/javascript" src="{{STATIC_URL}}/css/bootstrap/js/bootstrap.js"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.ui.core.js"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.ui.widget.js"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.ui.position.js"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.ui.menu.js"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.ui.autocomplete.js"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}js/jquery-1.11.0.js"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.formset.js"></script>

        <script type="text/javascript">
        $(function() {
            $('#id_drugs_table tbody tr').formset({
                prefix: '{{ rxform.prefix }}',
                added: function(row) {
                    var txt = row.find('.autocomplete-me');
                    txt.unbind();
                    makeAutocomplete(txt);
                }
            });
            var drugForms = [
			        "Intravenous Injection",
			        "Injectable Solution",
                    "Nasal Spray",
                    "Nasal Inhalant",
			        "Oral Pill",
			        "Oral Tablet",
			        "Oral Capsule",
			        "Oral Syrup",
			        "Oral Solution",
                    "Topical Cream",
                    "Topical Gel",
                    "Topical Spray",
                    "Topical Ointment",
                    "Topical Lotion",
                    "Topical Ointment",
                    "Transdermal Patch",
                    "Transdermal Gel",
		        ];
		        $( "#id_rxentry_set-0-drug_form" ).autocomplete({
			        source: drugForms
		        });
		        $( "#id_rxentry_set-1-drug_form" ).autocomplete({
			        source: drugForms
		        });
		        $( "#id_rxentry_set-2-drug_form" ).autocomplete({
			        source: drugForms
		        });
		        $( "#id_rxentry_set-3-drug_form" ).autocomplete({
			        source: drugForms
		        });
		        $( "#id_rxentry_set-4-drug_form" ).autocomplete({
			        source: drugForms
		        });
		        $( "#id_rxentry_set-5-drug_form" ).autocomplete({
			        source: drugForms
		        });
		        $( "#id_rxentry_set-6-drug_form" ).autocomplete({
			        source: drugForms
		        });
		        $( "#id_rxentry_set-7-drug_form" ).autocomplete({
			        source: drugForms
		        });
        });

        </script>
        <title>Update Prescription</title>
    </head>
 
    <body>
        <blockquote>
            <h1><a href="">Update Prescription</a></h1>
            <h2 class="text-center">{{prescription}}</h2>
        </blockquote>
        <div class="container">
            {% if message %}
                <div class="alert alert-warning">
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    <strong>Note: </strong>{{message}}
                </div>
            {% endif %}

            <h4>Prescription Information</h4>
            <form class="form form-inline" method="post" action=".">{%csrf_token%}
                <div class="well well-small">
                    {{form.as_p}}
                    <p>Date Created: {{ date_created }}</p>
                    <p>Last Modified: {{ date_modified }}</p>
                </div>

                <h4>Drugs</h4>
                <table class="table table-bordered table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Drug & Concentration</th>
                            <th scope="col">Form</th>
                            <th scope="col">Schedule</th>
                            <th scope="col">Quantity</th>
                            <th scope="col">Substitute</th>
                            <th scope="col">Refills</th>
                        </tr>
                    </thead>

                    <tbody>
                        {% for form in rxform.forms %}
                            <tr id="{{ form.prefix }}-row">
                                <td>
                                    {{ form.drug_name }}
                                </td>
                                <td>
                                    {{ form.drug_form }}
                                </td>
                                <td>{{ form.drug_schedule }}</td>
                                <td>{{ form.drug_quantity }}</td>
                                <td>{{ form.drug_substitution }}</td>
                                <td>{{ form.refills }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>

            <input type="submit" class="btn btn-warning" value="Update" name="update">
            <input type="button" class="btn btn-info"  value="Cancel" onClick="history.go(-1);return true;">
            <input type="reset" class="btn btn-info"  value="Reset">
            <input type="submit" class="btn btn-danger" value="Delete" name="delete">
        </form>

        </div> <!-- container -->
        <br><hr>
        <p><small>Update Prescription page</small></p>
    </body>
</html>
